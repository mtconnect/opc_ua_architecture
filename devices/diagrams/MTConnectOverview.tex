\centering\scalebox{0.8}{\begin{tikzpicture}[auto]

\node [draw] (device) {\includegraphics[width=.25\textwidth]{diagrams/MTConnectOverviewDevice.png} };
\node [black, below of =device, node distance =1.7cm] (text1) {Device};

\node [rectangle, draw, above of = device, node distance = 2cm, fill=white!20,text width=5em, xshift = 0em, text centered, minimum height=2em] (adapter) {Adapter (optional)};

\node [rectangle, draw, dashed, above of = device, node distance = 0cm, text width=12em, text centered, rounded corners, minimum height=12.2em, yshift = 1em] (devicewithadapter) {};

\node [rectangle, rounded corners, draw, right of = adapter, node distance = 5cm, fill=white!20,text width=5em, text centered, minimum height=4em] (agent) {MTConnect Agent};

\node [draw, above right of = agent, node distance = 3.5 cm, xshift = 3em] (client) {\includegraphics[width=.25\textwidth]{diagrams/MTConnectOverviewClient.png}};
\node [black, below of =client, node distance = 1.4cm] (text2) {Client};
 
%\path [draw, very thick, color=black!50] (device) |- (adapter);
\path [draw, very thick, color=black!50, -{Latex[scale=1.5]}]  (devicewithadapter) -| (agent);
\path [draw, very thick, color=black!50, -{Latex[scale=1.5]}] (agent) |- (client);
\path [draw, very thick, color=black!50, -{Latex[scale=1.5]}] (client) -| (agent);


\end{tikzpicture}
}
